# 🧑‍🏫 JavaScript 콜백 함수 (Callback Function)

---

## ✅ 1. 콜백 함수란?

> **콜백 함수**란, **다른 함수에 아규먼트로 전달되어 나중에 실행되는 함수**입니다.
> 자바스크립트에서는 함수도 "값"이기 때문에, 다른 함수의 **파라미터로 전달**하거나 나중에 호출(callback)할 수 있습니다.

```javascript
function greet(name, callback) {
  console.log("Hello, " + name);
  callback();
}
```

➡ 여기서 `callback`은 나중에 실행되는 함수입니다.

---

## 💬 2. 콜백 함수 사용 목적

| 목적       | 설명                                    |
| -------- | ------------------------------------- |
| 비동기 처리   | 이벤트 완료 후 동작 연결 (ex: Ajax, setTimeout) |
| 순차 실행 보장 | 작업이 끝난 후에 다음 작업 실행                    |
| 재사용성     | 다양한 후처리 로직을 외부 함수로 분리 가능              |
| 로직 추상화   | 공통 기능 내에서 다양한 동작 주입 가능 (전략 패턴 느낌)     |

---

## 🔁 3. 흐름 시각화

```text
[함수 호출]  
    ↓
[콜백 함수 전달]  
    ↓
[함수 내부에서 필요 시점에 콜백 호출]  
    ↓
[콜백 함수 실행됨]
```

---

## 📘 4. 기본 예제

```javascript
function greet(name, callback) {
  console.log("Hello, " + name);
  callback(); // 나중에 실행
}

function afterGreet() {
  console.log("반가워요!");
}

greet("Alice", afterGreet);
```

출력 결과:

```
Hello, Alice
반가워요!
```

---

## 🧩 5. 익명 함수로 콜백 전달하기

```javascript
greet("Bob", function () {
  console.log("처음 뵙겠습니다!");
});
```

---

## ⏱ 6. 비동기 작업에서 콜백 사용 예

```javascript
setTimeout(function () {
  console.log("3초 후 실행!");
}, 3000);
```

➡ 이 `function () {}`이 콜백 함수

---

## 🧠 7. 고차 함수와 콜백

> 고차 함수(high-order function): **함수를 아규먼트트로 받거나, 함수를 리턴하는 함수**

```javascript
function repeat(n, callback) {
  for (let i = 0; i < n; i++) {
    callback(i);
  }
}

repeat(3, function (i) {
  console.log(i + "번째 반복");
});
```

---

## 🧪 8. 실습 문제

### Q1. 숫자 두 개를 더한 후, 결과를 출력하는 콜백 함수를 만들어보세요.

```javascript
add(2, 3, result => {
  console.log("결과:", result);
});
```

<details>
<summary>정답 보기</summary>

```javascript
function add(a, b, callback) {
  const result = a + b;
  callback(result);
}
```

</details>

---

### Q2. `doTask` 함수는 실행 전후 메시지를 출력하도록 콜백을 받습니다.

```javascript
doTask(() => {
  console.log("업무 실행 중...");
});
```

<details>
<summary>정답 보기</summary>

```javascript
function doTask(callback) {
  console.log("업무 시작");
  callback();
  console.log("업무 종료");
}
```

</details>

---

## 🔁 9. 콜백 기반 리팩토링 예제

### Before: 중복된 로직

```javascript
function startTask() {
  console.log("1단계 준비");
  console.log("2단계 작업");
  console.log("3단계 종료");
}
```

### After: 콜백 분리

```javascript
function runStep(step) {
  console.log("1단계 준비");
  step();
  console.log("3단계 종료");
}

runStep(function () {
  console.log("2단계 작업");
});
```

➡ 핵심 로직을 콜백으로 분리해 유연성 확보

---

## ⚠️ 10. 주의사항: 콜백 헬(callback hell)

```javascript
setTimeout(() => {
  console.log("1단계");
  setTimeout(() => {
    console.log("2단계");
    setTimeout(() => {
      console.log("3단계");
    }, 1000);
  }, 1000);
}, 1000);
```

> 너무 많은 중첩은 가독성과 유지보수성을 떨어뜨림 → 해결책: **Promise**, **async/await**

---

## 🧠 11. 마무리 요약

| 항목    | 내용                        |
| ----- | ------------------------- |
| 정의    | 함수에 전달되어 **나중에 호출되는 함수**  |
| 쓰이는 곳 | setTimeout, 이벤트, 배열 메서드 등 |
| 장점    | 유연한 후처리, 비동기 처리           |
| 단점    | 깊은 중첩 → 콜백 헬 문제           |



