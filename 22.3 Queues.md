**â€œë¸Œë¼ìš°ì € ë‚´ë¶€ì—ì„œ ì‹¤ì œë¡œ ë™ì‘í•˜ëŠ” íë“¤(Queues)â€**â€”ì¦‰,
**Task Queue, Microtask Queue, Animation Frame Queue, Render Queue, Message Queue ë“±**â€”ì´ ìˆìŠµë‹ˆë‹¤.

ì´ ë‚´ìš©ì€ ì´ë²¤íŠ¸ ë£¨í”„ êµ¬ì¡°ë¥¼ 100% ì´í•´í•˜ë ¤ë©´ ë°˜ë“œì‹œ ì•Œì•„ì•¼ í•˜ëŠ” í•µì‹¬ì…ë‹ˆë‹¤.

---

# ğŸ§µ 0. íëŠ” ì™œ ì—¬ëŸ¬ ì¢…ë¥˜ê°€ ì¡´ì¬í• ê¹Œ?

ë¸Œë¼ìš°ì €ëŠ” ì•„ì£¼ ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤:

* ë„¤íŠ¸ì›Œí¬ ì‘ë‹µ
* íƒ€ì´ë¨¸ ì™„ë£Œ
* DOM ì´ë²¤íŠ¸
* Promise ì½œë°±
* MutationObserver
* requestAnimationFrame
* ë Œë”ë§ ë‹¨ê³„ ìŠ¤ì¼€ì¤„ë§

ì´ë¥¼ **ë‹¨ í•˜ë‚˜ì˜ íì— ëª¨ë‘ ì„ì–´ë²„ë¦¬ë©´**?

âŒ ë Œë”ë§ì´ ëŠ¦ì–´ì§
âŒ ë¬´í•œ Promise ë£¨í”„ê°€ ë Œë”ë§ì„ ì˜ì›íˆ ë§‰ì•„ë²„ë¦¼
âŒ ì‚¬ìš©ì ì…ë ¥ ì´ë²¤íŠ¸ê°€ ì§€ì—°ë¨
âŒ UIê°€ ë²„ë²…ì„

ğŸ‘‰ ê·¸ë˜ì„œ **ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì—¬ëŸ¬ ì¢…ë¥˜ì˜ í**ë¥¼ ë¶„ë¦¬í•´ ê´€ë¦¬í•©ë‹ˆë‹¤.

---

# ğŸ§µ 1. ë¸Œë¼ìš°ì €ì˜ í ì¢…ë¥˜ ì´ì •ë¦¬

ë¸Œë¼ìš°ì €ì—ëŠ” í¬ê²Œ ë‹¤ìŒ íë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤:

## âœ” (1) **Macrotask Queue (Task Queue)**

## âœ” (2) **Microtask Queue (Job Queue)**

## âœ” (3) **Animation Frame Queue (rAF Queue)**

## âœ” (4) **Render Queue (Render Step)**

## âœ” (5) **Message Queue (MessageChannel)**

## âœ” (6) **Idle Callback Queue (requestIdleCallback)**

## âœ” (7) **Event Queue / Input Queue (ì‚¬ìš©ì ì…ë ¥ ì´ë²¤íŠ¸ í)**

ì•„ë˜ì—ì„œ í•˜ë‚˜ì”© ê¹Šê²Œ ë“¤ì–´ê°‘ë‹ˆë‹¤.

---

# 1ï¸âƒ£ Macrotask Queue (Task Queue) â€” â€œì¼ë°˜ ì½œë°±ë“¤â€

**ê°€ì¥ ê¸°ë³¸ì ì¸ í**.
ì´ë¦„ë„ ì—¬ëŸ¬ ê°œì…ë‹ˆë‹¤:

* Task Queue
* Callback Queue
* Macrotask Queue

### â¤ Task Queueì— ë“¤ì–´ê°€ëŠ” ê²ƒë“¤

| ì¢…ë¥˜                     | ì˜ˆì‹œ                                                |
| ---------------------- | ------------------------------------------------- |
| íƒ€ì´ë¨¸                    | setTimeout, setInterval                           |
| ë„¤íŠ¸ì›Œí¬                   | AJAX/XHR ì´ë²¤íŠ¸, fetchì˜ onload (fetch ë³¸ì²´ëŠ” Microtask) |
| DOM ì´ë²¤íŠ¸                | click, scroll, input ë“±                            |
| MessageChannel         | postMessage                                       |
| WebSocket ì´ë²¤íŠ¸          | onmessage                                         |
| setImmediate (IE/Node) | ë¹„ìŠ·í•˜ê²Œ Task Queue                                   |

### íŠ¹ì§•

* **ìš°ì„ ìˆœìœ„ ë‚®ìŒ**
* **1íšŒì— 1ê°œì”©ë§Œ** ì´ë²¤íŠ¸ ë£¨í”„ê°€ ê°€ì ¸ê°„ë‹¤
* Microtask Queueê°€ ë¹„ì–´ì•¼ Task Queueê°€ ì‹¤í–‰ë¨

---

# 2ï¸âƒ£ Microtask Queue (Job Queue) â€” â€œê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„â€

Promise, MutationObserver ë“±ì´ ì‚¬ìš©í•˜ëŠ” íì…ë‹ˆë‹¤.

### â¤ Microtask Queueì— ë“¤ì–´ê°€ëŠ” ì‘ì—…

| ì¢…ë¥˜               | ì˜ˆì‹œ                                  |
| ---------------- | ----------------------------------- |
| Promise          | `.then()`, `.catch()`, `.finally()` |
| async/await      | await ì´í›„ ì½”ë“œ                         |
| MutationObserver | DOM ë³€ê²½ ê°ì§€                           |
| queueMicrotask() | ëª…ì‹œì  ë§ˆì´í¬ë¡œíƒœìŠ¤í¬                         |

### íŠ¹ì§•

* **ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„**
* Task Queueë³´ë‹¤ ë¨¼ì € ì²˜ë¦¬ë¨
* ì´ë²¤íŠ¸ ë£¨í”„ëŠ” **â€œMicrotaskë¥¼ ë¹„ìš¸ ë•Œê¹Œì§€ ê³„ì† ë°˜ë³µí•´ì„œ ì‹¤í–‰â€**
  â†’ ë¬´í•œ ë£¨í”„ë„ ê°€ëŠ¥

### ì˜ˆì‹œ

```js
setTimeout(() => console.log('task'), 0);
Promise.resolve().then(() => console.log('micro'));
```

ì¶œë ¥:

```
micro
task
```

ì´ìœ : Microtask Queueê°€ Task Queueë³´ë‹¤ ìš°ì„ .

---

# 3ï¸âƒ£ Animation Frame Queue â€” requestAnimationFrame

`requestAnimationFrame(callback)`ì€ **íŠ¹ìˆ˜í•œ í**ì— ì¶”ê°€ë©ë‹ˆë‹¤.

### ì´ íëŠ” ì–¸ì œ ì‹¤í–‰ë ê¹Œ?

**ë Œë”ë§ ì§ì „(vsync íƒ€ì´ë°)ì—ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.**

ì¦‰:

```
JS ì‹¤í–‰ â†’ Microtask â†’ rAF â†’ ë Œë”ë§ â†’ ë‹¤ìŒ ë£¨í”„
```

### ì´ íì˜ ëª©ì 

* ë¸Œë¼ìš°ì € ë Œë”ë§ ì‚¬ì´í´ì— ë§ì¶° ì• ë‹ˆë©”ì´ì…˜ì„ ë¶€ë“œëŸ½ê²Œ ë§Œë“¤ê¸° ìœ„í•´
* ì´ˆë‹¹ 60íšŒ(â‰ˆ16.66ms) ì‹¤í–‰

---

# 4ï¸âƒ£ Render Queue (ë¸Œë¼ìš°ì € ë Œë” ë‹¨ê³„)

ì‹¤ì œ ë Œë”ë§ì€ íë¼ê¸°ë³´ë‹¤ **ê³ ì •ëœ LifeCycle ë‹¨ê³„**ì§€ë§Œ,
ì‹¤í–‰ íƒ€ì´ë°ì€ í ê¸°ë°˜ ìŠ¤ì¼€ì¤„ë§ê³¼ ë§¤ìš° ìœ ì‚¬í•©ë‹ˆë‹¤.

ë Œë”ëŸ¬ëŠ” ë³´í†µ ë‹¤ìŒ ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤:

1. **ìŠ¤íƒ€ì¼ ê³„ì‚°**
2. **ë ˆì´ì•„ì›ƒ(Reflow)**
3. **í˜ì¸íŠ¸(Paint)**
4. **í•©ì„±(Composite)**

ì´ ë Œë”ë§ ë‹¨ê³„ëŠ”:

* JS â†’ Microtask â†’ rAF í›„ì— ì‹¤í–‰ë¨
* ë Œë”ë§ ì¤‘ê°„ì—ëŠ” **JS ì‹¤í–‰ì´ ì ˆëŒ€ ë“¤ì–´ì˜¬ ìˆ˜ ì—†ìŒ**
* ì‚¬ìš©ì ì…ë ¥ ì´ë²¤íŠ¸ë„ ëŒ€ë¶€ë¶„ ë Œë”ë§ í›„ì— ì²˜ë¦¬ë¨

---

# 5ï¸âƒ£ Message Queue â€” MessageChannel & postMessage

MessageChannelì˜ ë©”ì‹œì§€ëŠ” **Task Queue**ì— ë“¤ì–´ê°€ì§€ë§Œ
ë¸Œë¼ìš°ì € ë‚´ë¶€ì—ì„œëŠ” ë³„ë„ êµ¬ì¡°ë¡œ ê´€ë¦¬í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.

íŠ¹ì§•:

* ë‹¤ë¥¸ ìŠ¤ë ˆë“œ/ì›Œì»¤ì™€ í†µì‹ 
* ë©”ì‹œì§€ê°€ ì˜¤ë©´ â†’ Task Queueë¡œ ì „ë‹¬
* setTimeoutë³´ë‹¤ ë¹ ë¥¼ ìˆ˜ë„, ëŠë¦´ ìˆ˜ë„ ìˆìŒ (êµ¬í˜„ì²´ì— ë”°ë¼ ë‹¤ë¦„)

---

# 6ï¸âƒ£ Idle Callback Queue (requestIdleCallback)

`requestIdleCallback()`ì€ **CPUê°€ ì‰¬ëŠ” ì‹œê°„**ì—ë§Œ ì‹¤í–‰ë˜ëŠ” íŠ¹ìˆ˜ íì…ë‹ˆë‹¤.

íŠ¹ì§•:

* ë‹¤ë¥¸ ëª¨ë“  ì‘ì—…(Task/Microtask/rAF/Render)ì´ ëë‚œ í›„
* ë‚¨ëŠ” ì‹œê°„(`idle`)ì—ì„œë§Œ ì‹¤í–‰
* ìš°ì„ ìˆœìœ„ ë§¤ìš° ë‚®ìŒ

ìš©ë„:

* ë°±ê·¸ë¼ìš´ë“œ ë¶„ì„
* ë¡œê·¸ ì „ì†¡
* ì €ìš°ì„  ì‘ì—…

---

# 7ï¸âƒ£ Event Queue / Input Queue (ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬)

ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì—ì„œ í´ë¦­/ìŠ¤í¬ë¡¤/ì…ë ¥í•˜ë©´ OSê°€ ì´ë²¤íŠ¸ë¥¼ ë¸Œë¼ìš°ì €ì— ì „ë‹¬í•©ë‹ˆë‹¤.

ì´ ì´ë²¤íŠ¸ë“¤ì€ ë‹¤ìŒ ìˆœì„œë¥¼ ê±°ì¹©ë‹ˆë‹¤:

1. OS ì´ë²¤íŠ¸ â†’ ìš°ì„ ìˆœìœ„ íì— ì €ì¥
2. ë¸Œë¼ìš°ì € ë©”ì¸ ìŠ¤ë ˆë“œê°€ ì´ë²¤íŠ¸ë¥¼ polling
3. ì´ë²¤íŠ¸ê°€ Task Queueë¡œ ì „ë‹¬ë¨
4. Task Queue â†’ Call Stack ì‹¤í–‰

ì¦‰:

> DOM ì´ë²¤íŠ¸ ì½œë°±ë„ ê²°êµ­ Task Queueì— ë“¤ì–´ê°„ë‹¤.

---

# ğŸ§µ 3. ì‹¤í–‰ ìˆœì„œ (ì „ì²´ ë£¨í”„)

ì´ ëª¨ë“  íëŠ” **ì´ë²¤íŠ¸ ë£¨í”„ì—ì„œ í•˜ë‚˜ì˜ ê·œì¹™**ìœ¼ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤.

## âœ” ì´ë²¤íŠ¸ ë£¨í”„ í•œ í„´(Tick)ì˜ ìˆœì„œ

1. **Call Stack ë¹„ì—ˆëŠ”ì§€ í™•ì¸**
2. **Microtask Queue ì „ë¶€ ì‹¤í–‰ (ë¹„ì›Œì§ˆ ë•Œê¹Œì§€ ë°˜ë³µ)**
3. **Animation Frame Queue ì‹¤í–‰ (rAF)**
4. **ë Œë”ë§(Render)**
5. **Task Queueì—ì„œ í•˜ë‚˜ ê°€ì ¸ì™€ ì‹¤í–‰**
6. Idle Callback Queue ì‹¤í–‰ (requestIdleCallback)
7. ë‹¤ì‹œ Step 1

ì´ ìˆœí™˜ì´ ì´ˆë‹¹ ìˆ˜ì‹­ ~ ìˆ˜ë°± ë²ˆ ë°˜ë³µë©ë‹ˆë‹¤.

---

# ğŸ§¨ 4. ë¬´í•œ Microtask ë¬¸ì œ

Microtask QueueëŠ” **â€œëª¨ë‘ ë¹„ìš¸ ë•Œê¹Œì§€ ì‹¤í–‰â€** ê·œì¹™ì´ ìˆê¸° ë•Œë¬¸ì—:

```js
function loop() {
  Promise.resolve().then(loop);
}
loop();
```

ì´ëŸ° ì½”ë“œëŠ”:

* Microtask Queueê°€ ê³„ì† ì±„ì›Œì§€ê³ 
* ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì ˆëŒ€ **Task Queueë¡œ ë‚´ë ¤ê°€ì§€ ëª»í•¨**
* ê²°êµ­ ë Œë”ë§ë„ ëª» í•˜ê³  UI ë©ˆì¶¤

ì´ ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë¸Œë¼ìš°ì €ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì œì•½ì„ ë‘¡ë‹ˆë‹¤:

> ë„ˆë¬´ ë§ì€ Microtaskê°€ ì—°ì† ì‹¤í–‰ë˜ë©´ ê²½ê³  ë˜ëŠ” ì¤‘ë‹¨ ì‹œë„

---

# ğŸ§© 5. ë§ˆë¬´ë¦¬: ë¸Œë¼ìš°ì €ì˜ í ì „ì²´ ê´€ê³„ ìš”ì•½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Microtask Queue (ìµœìš°ì„ )   â”‚  â† Promise, MutationObserver
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Animation Frame Queue (rAF)  â”‚  â† ë Œë” ì§ì „
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Render Phase          â”‚  â† ìŠ¤íƒ€ì¼, ë ˆì´ì•„ì›ƒ, í˜ì¸íŠ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Task Queue (Macrotask)   â”‚  â† setTimeout, DOM ì´ë²¤íŠ¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Input/Event Queue (User)    â”‚  â† í´ë¦­, í‚¤ë³´ë“œ ì…ë ¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Idle Callback Queue         â”‚  â† CPU ì‰¬ëŠ” ì‹œê°„
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# ğŸ¯ ê²°ë¡  ìš”ì•½ í•œ ì¤„

> **ë¸Œë¼ìš°ì €ì—ëŠ” ì—¬ëŸ¬ ì¢…ë¥˜ì˜ íê°€ ìˆìœ¼ë©°,
> ê° íëŠ” ìš°ì„ ìˆœìœ„ì™€ ëª©ì ì´ ë‹¤ë¥´ê³ ,
> ì´ë²¤íŠ¸ ë£¨í”„ëŠ” Microtask â†’ rAF â†’ Render â†’ Task â†’ Idle ìˆœì„œë¡œ ì²˜ë¦¬í•œë‹¤.**

