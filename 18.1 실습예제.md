# ğŸ“˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¶ˆë³€ì„±(immutability)

---

## 1ï¸âƒ£ ì–•ì€ ë³µì‚¬ vs ê¹Šì€ ë³µì‚¬ (Shallow Copy vs Deep Copy)

### ğŸ”¹ ì–•ì€ ë³µì‚¬ (Shallow Copy)

> ê°ì²´ì˜ **ìµœìƒìœ„ ìˆ˜ì¤€ì˜ ì†ì„±**ë§Œ ë³µì‚¬í•˜ê³ , ì¤‘ì²© ê°ì²´ëŠ” **ì°¸ì¡°ë§Œ ë³µì‚¬**ë¨.

```javascript
const original = {
  name: "Alice",
  address: { city: "Seoul" }
};

const shallow = { ...original };
shallow.address.city = "Busan";

console.log(original.address.city); // "Busan"
```

### âœ”ï¸ ì–•ì€ ë³µì‚¬ ë°©ë²•

| ë°©ë²•                        | ì„¤ëª…                              |
| ------------------------- | ------------------------------- |
| `Object.assign()`         | `{}`ì— ê¸°ì¡´ ê°ì²´ ë³‘í•©                  |
| ì „ê°œ ì—°ì‚°ì `...`              | `{ ...original }`, `[...array]` |
| `Array.prototype.slice()` | ë°°ì—´ ë³µì‚¬                           |

---

### ğŸ”¹ ê¹Šì€ ë³µì‚¬ (Deep Copy)

> **ëª¨ë“  ì¤‘ì²© ê°ì²´ê¹Œì§€ ì™„ì „ ë³µì œ**í•˜ì—¬ ì›ë³¸ê³¼ì˜ ì°¸ì¡°ë¥¼ ì™„ì „íˆ ëŠìŒ.

```javascript
const original = {
  name: "Alice",
  address: { city: "Seoul" }
};

const deep = JSON.parse(JSON.stringify(original));
deep.address.city = "Busan";

console.log(original.address.city); // "Seoul"
```

### âœ”ï¸ ê¹Šì€ ë³µì‚¬ ë°©ë²•

| ë°©ë²•                                | ì„¤ëª…                                             |
| --------------------------------- | ---------------------------------------------- |
| `JSON.parse(JSON.stringify(obj))` | ë¬¸ìì—´ ì§ë ¬í™” í›„ ì—­ì§ë ¬í™” (ë‹¨ì : í•¨ìˆ˜, Symbol, undefined ì†ì‹¤ë¨) |
| `structuredClone(obj)`            | ìµœì‹  ë¸Œë¼ìš°ì € ì§€ì›, ë” ì•ˆì „í•œ ë°©ì‹                           |
| ë¼ì´ë¸ŒëŸ¬ë¦¬                             | Lodash `_.cloneDeep(obj)` ë“± í™œìš© ê°€ëŠ¥              |

---

## ğŸ§ª ì‹¤ìŠµ: ì–•ì€ ë³µì‚¬ì™€ ê¹Šì€ ë³µì‚¬ì˜ ì°¨ì´

```javascript
const person = {
  name: "Tom",
  skills: ["JavaScript", "React"]
};

// ì–•ì€ ë³µì‚¬
const clone1 = { ...person };
clone1.skills.push("Node.js");

console.log(person.skills); // ì›ë³¸ë„ ë³€ê²½ë¨!

// ê¹Šì€ ë³µì‚¬
const clone2 = structuredClone(person);
clone2.skills.push("TypeScript");

console.log(person.skills); // ì›ë³¸ì€ ì˜í–¥ ì—†ìŒ
```

---

## 2ï¸âƒ£ ë¶ˆë³€ ê°ì²´ ì„¤ê³„ ì „ëµ (Immutable Object Design)

### ğŸ”¹ ì™œ ë¶ˆë³€ì„±ì´ ì¤‘ìš”í•œê°€?

* ë²„ê·¸ ë°©ì§€: ìƒíƒœê°€ ì˜ˆì¸¡ ê°€ëŠ¥
* React, Redux ê°™ì€ UI í”„ë ˆì„ì›Œí¬ëŠ” ë³€ê²½ ê°ì§€ë¥¼ ìœ„í•´ ë¶ˆë³€ ë°ì´í„° ì„ í˜¸
* íˆìŠ¤í† ë¦¬ ê´€ë¦¬, Undo/Redo êµ¬í˜„ì— ìœ ë¦¬

---

### âœ”ï¸ ë¶ˆë³€ ê°ì²´ë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•

```javascript
const user = {
  name: "Alice",
  profile: {
    email: "alice@example.com"
  }
};

// âŒ ì§ì ‘ ìˆ˜ì •
// user.profile.email = "bob@example.com";

// âœ… ë¶ˆë³€í•˜ê²Œ ìˆ˜ì •
const updatedUser = {
  ...user,
  profile: {
    ...user.profile,
    email: "bob@example.com"
  }
};
```

> ì¤‘ì²©ëœ ê°ì²´ê¹Œì§€ ì „ê°œ ì—°ì‚°ìë¡œ ë³µì‚¬í•˜ì—¬ ì°¸ì¡°ë¥¼ ëŠì–´ì•¼ í•¨

---

### ğŸ§  ë¶ˆë³€ ì—…ë°ì´íŠ¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì˜ˆì œ

```javascript
function updateUserEmail(user, newEmail) {
  return {
    ...user,
    profile: {
      ...user.profile,
      email: newEmail
    }
  };
}
```

---

## 3ï¸âƒ£ Immutable.js ì‹¤ìŠµ ìë£Œ

> [Immutable.js](https://immutable-js.github.io/immutable-js/)ëŠ” ë¶ˆë³€ ë°ì´í„° êµ¬ì¡°ë¥¼ ì§€ì›í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

### ğŸ”§ ì„¤ì¹˜

```bash
npm install immutable
```

---

### ğŸ”¹ ì£¼ìš” ìë£Œêµ¬ì¡°

| íƒ€ì…             | ì„¤ëª…                 |
| -------------- | ------------------ |
| `Map`          | ë¶ˆë³€ ê°ì²´ êµ¬ì¡° (`{}` ëŒ€ì²´) |
| `List`         | ë¶ˆë³€ ë°°ì—´ êµ¬ì¡° (`[]` ëŒ€ì²´) |
| `Set`, `Stack` | ê¸°íƒ€ ë¶ˆë³€ êµ¬ì¡°           |

---

### ğŸ”¹ ê¸°ë³¸ ì‚¬ìš©ë²•

```javascript
import { Map } from 'immutable';

const user = Map({ name: "Alice", age: 25 });

const updated = user.set("age", 30);

console.log(user.get("age"));       // 25
console.log(updated.get("age"));    // 30
```

> `.set()`ì€ ê°’ì„ ë³€ê²½í•˜ëŠ” ëŒ€ì‹  **ìƒˆë¡œìš´ ê°ì²´ ë°˜í™˜**

---

### ğŸ”¹ ë¶ˆë³€ List ì˜ˆì œ

```javascript
import { List } from 'immutable';

const list = List([1, 2, 3]);

const newList = list.push(4); // [1, 2, 3, 4]

console.log(list.toJS());    // [1, 2, 3]
console.log(newList.toJS()); // [1, 2, 3, 4]
```

---

### âœ… ë¶ˆë³€ì„± ê²€ì¦ ì˜ˆì œ

```javascript
console.log(user === updated); // false (ìƒˆë¡œìš´ ê°ì²´)
console.log(user.equals(updated)); // false (ë‚´ìš©ë„ ë‹¤ë¦„)
```

---

## ğŸ§  ì •ë¦¬ ìš”ì•½

| í•­ëª©       | ì–•ì€ ë³µì‚¬          | ê¹Šì€ ë³µì‚¬           | ë¶ˆë³€ ê°ì²´               |
| -------- | -------------- | --------------- | ------------------- |
| ì¤‘ì²© ê°ì²´ ì˜í–¥ | âŒ ìˆìŒ           | âœ… ì—†ìŒ            | âœ… ì—†ìŒ                |
| ì°¸ì¡° ëŠê¹€    | âŒ ì—†ìŒ           | âœ… ìˆìŒ            | âœ… ìˆìŒ                |
| êµ¬í˜„ ë‚œì´ë„   | ì‰¬ì›€             | ì–´ë ¤ì›€             | ì–´ë ¤ì›€ or ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš”     |
| ëŒ€í‘œ ê¸°ìˆ     | spread, assign | JSON, cloneDeep | Immutable.js, Immer |



