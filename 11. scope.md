# 🧑‍🏫 JavaScript 스코프(Scope)

---

## ✅ 1. 스코프(Scope)란?

> **스코프**란 "변수에 접근할 수 있는 범위"를 의미합니다.
> 어떤 **코드 블록 내부에서 선언된 변수**는, **해당 블록 내에서만 접근**할 수 있습니다.

```javascript
let a = 10;

function test() {
  let b = 20;
  console.log(a); // 접근 가능
  console.log(b); // 접근 가능
}

console.log(b); // ❌ ReferenceError
```

---

## 🔍 2. 스코프의 종류

| 종류      | 설명                                                        |
| ------- | --------------------------------------------------------- |
| 전역 스코프  | 코드 전체에서 접근 가능 (`var`, `let`, `const` 모두 해당)               |
| 함수 스코프  | 함수 안에서 선언된 변수는 함수 내부에서만 유효 (`var`, `let`, `const`)        |
| 블록 스코프  | `{}` 안에서 선언된 `let`, `const` 변수는 해당 블록 안에서만 유효 (`var`는 예외) |
| 렉시컬 스코프 | 정의된 위치에 따라 스코프가 정해짐 (동적 X, 정적 O)                          |

---

## 🧊 3. 시각화 예제

```javascript
let x = 1;

function outer() {
  let y = 2;

  function inner() {
    let z = 3;
    console.log(x, y, z); // ✅ 1, 2, 3
  }

  inner();
  console.log(x, y, z); // ❌ z is not defined
}

outer();
```

---

## 💡 4. var vs let/const 차이점


---



### Q1. 아래 코드의 출력 결과를 예측해 보세요
```javascript
function testScope() {
  var a = 10;
  if (true) {
    var a = 20;
    console.log("if:", a);
  }
  console.log("out:", a);
}
testScope();
```

<details>
<summary>정답 보기</summary>

출력:

```
if: 20
out: 20
```

> `var`는 함수 스코프이므로 같은 스코프 내에서 덮어씌워짐

</details>

---

### Q2. 다음 코드에서 오류가 발생하는 부분을 찾으세요

```javascript
function calc() {
  if (true) {
    let x = 5;
  }
  console.log(x);
}
```

<details>
<summary>정답 보기</summary>

오류 발생: `x is not defined`
`let`은 블록 스코프를 따르므로 `if` 블록 바깥에서 `x`에 접근 불가

</details>

---

## 🔧 5. 리팩토링 포인트: 변수 범위를 좁히기

### Before

```javascript
function process(data) {
  var result;
  if (data > 0) {
    result = "Positive";
  }
  console.log(result);
}
```

### After (let 사용, 블록 스코프 보호)

```javascript
function process(data) {
  if (data > 0) {
    let result = "Positive";
    console.log(result);
  }
}
```

➡ 변수 유효 범위를 최소화해 사이드 이펙트 방지

---

## 🐛 6. 디버깅 팁: 스코프 체인 추적

> 스코프 체인(Scope Chain)은 내부 함수에서 **외부 변수에 접근할 수 있는 연결 구조**

```javascript
function outer() {
  let a = 1;
  function inner() {
    let b = 2;
    console.log(a + b);
  }
  inner();
}
outer();
```

✅ `inner`는 자신의 스코프 + `outer` + 전역까지 **위로 검색**함
❌ 아래 방향 검색은 불가능

---


## 📊 마무리 요약

| 키워드     | 의미                                  |
| ------- | ----------------------------------- |
| 스코프     | 변수 접근 가능 범위                         |
| 블록 스코프  | `{}` 안에서만 유효 (`let`, `const`)       |
| 함수 스코프  | 함수 내부에서만 유효 (`var`, `let`, `const`) |
| 렉시컬 스코프 | 정의 위치 기준으로 접근 가능 여부 결정              |
| 스코프 체인  | 내부 → 외부 → 전역 방향으로 변수 탐색             |



